[{"id":"a5074148.5af8c","type":"http in","name":"","url":"/wordcloud","method":"get","swaggerDoc":"","x":202,"y":133,"z":"3f2e5fcf.c0d1a","wires":[["fe305752.01cfa8"]]},{"id":"2b87e869.d47818","type":"http response","name":"","x":612.0000152587891,"y":133,"z":"3f2e5fcf.c0d1a","wires":[]},{"id":"fe305752.01cfa8","type":"template","name":"","field":"payload","format":"handlebars","template":"<!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Transitional//EN\" \"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd\">\n<html xmlns=\"http://www.w3.org/1999/xhtml\">\n<head>\n<meta http-equiv=\"Content-Type\" content=\"text/html; charset=utf-8\" />\n<title>canvas</title>\n<script src=\"http://cdslabfs.mybluemix.net/wordcloud2.js/src/wordcloud2.js\"></script>\n<script src=\"http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js\"></script>\n<link href='http://fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet' type='text/css'>\n\n<style type=\"text/css\">    \n#canvas_cloud{\nwidth: 100%;\nheight:600px;\n}\n</style>\n\n</head>\n\n<body>\n\n<div id=\"sourrounding_div\" style=\"width:100%;height:600px\">\n<canvas id=\"canvas_cloud\"></canvas>\n</div>\n\n<script>\n\nvar div = document.getElementById(\"sourrounding_div\");\n\nvar canvas = document.getElementById(\"canvas_cloud\");\n\ncanvas.height = div.offsetHeight;\n\ncanvas.width  = div.offsetWidth;\n\n\n    $.getJSON(\"/concepts\", function(data) {\n\n    var frequency_list = [];\n    var size;\n    max = data.length;\n    console.log(\"Max is: \" + max);\n    for (var i = 0; i < max; i++) {\n      //If the first value is 1, then all vlaues will be 1, so make everything the same size\n      if (data[0].value == 1) {size = 5}\n      else if (i == 0) {size = 10}\n      else if (i < (0.1 * max)) {size = 8}\n      else if (i < (0.2 * max)) {size = 7}\n      else if (i < (0.3 * max)) {size = 5}\n      else if (i < (0.4 * max)) {size = 5}\n      else if (i < (0.5 * max)) {size = 4}\n      else if (i < (0.6 * max)) {size = 4}\n      else if (i < (0.7 * max)) {size = 3}\n      else if (i < (0.8 * max)) {size = 3}\n      else {size = 3}\n      console.log(\"Pushing: \" + data[i].key);\n      console.log(\"With a size of: \" + size);\n      frequency_list.push([data[i].key,size]);\n      }\n      \n      console.log(\"frequency list is: \" + frequency_list);\n\nvar options = \n{\n  list : frequency_list,\n  gridSize: Math.round(16 * document.getElementById('canvas_cloud').offsetWidth / 1024),\n  weightFactor: function (size) {\n    return Math.pow(size, 1.9) * document.getElementById('canvas_cloud').offsetWidth / 1024;\n  },\n  rotateRatio : 0.75\n}\n\nWordCloud(document.getElementById('canvas_cloud'),options); \n});\n</script>\n\n</body>\n</html>\n\n","x":414.00001525878906,"y":134,"z":"3f2e5fcf.c0d1a","wires":[["2b87e869.d47818"]]}]
